{% extends "odpw_portal_layout.jinja" %}


{% block headerstyle %}
a:hover{
 background:black;
}

table thead{
border-bottom: 1px solid;
}

{% endblock %}


{% macro statsCard(data, label, key) -%}

<div href="test" class="ui card statsCard">
    <div class="content">
        <span class="header">{{data[key].distinct}} {{label}}
    </div>
    <div class="content" style="width:100%" >
        <table class="ui very basic single line table" style="width:100px">
            <thead>
                <tr>
                    <th>No</th>
                    <th>License</th>
                    <th>Count</th>
                </tr>
            </thead>
            <tbody>
                {% for l in data[key].top3Dist %}
                <tr>
                    <td>
                    {% if loop.index!=4 %}
                        {{loop.index}}
                        {% else %}
                            -
                            {% endif %}
                    </td>
                    <td>{{l[key]}}</td>
                    <td>{{l.count}} ({{ (l.perc*100)| round(2)}}%)</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{%- endmacro %}





{% block portalcontent %}


<!--<div class="thirteen wide column ui padded divided grid">-->
<div class="ui equal width center aligned padded grid">
    <h2>General Portal Information</h2>

    <div class="row">

        <div class="ui statistics column">
            <a class="statistic">
                <div class="value">
                    {{data.datasets}}
                </div>
                <div class="label">
                    Datasets
                </div>
            </a>
            <div class="statistic">
                <div class="value">
                    {{data.snapshots.list|length}}
                </div>
                <div class="label">
                    Snapshots
                </div>
            </div>
            <div class="statistic">
                <div class="value">
                    22
                </div>
                <div class="label">
                    Resources
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="ui doubling stackable  cards">
            {{statsCard(data, 'Licenses', 'license')}}
            {{statsCard(data, 'Formats', 'format')}}
            {{statsCard(data, 'Organisations', 'organisation')}}
        </div>
    </div>

</div>


{{data}}

{% endblock %}
