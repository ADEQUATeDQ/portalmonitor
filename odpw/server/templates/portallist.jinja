< !{ % extends "_base.jinja" % } { % block scripts % } { { super() } } < script type="text/javascript" src="{{ static_url('js/list.min.js') }}">
    < /script>
        < script src="//code.jquery.com/ui/1.11.4/jquery-ui.js">
            < /script> { % endblock % } { % block content % }
                < aside>
                    < nav class="side">
                        < ul>
                            < li>
                                < a href="/">
                                    < i class="fa fa-server fa-2x">
                                        < /i>
                                            < p> System
                                                < /p>
                                                    < /a>
                                                        < /li>
                                                            < li>
                                                                < a href="/list/portals/" class="cur">
                                                                    < i class="fa fa-cubes  fa-2x">
                                                                        < /i>
                                                                            < p> Portals
                                                                                < /p>
                                                                                    < /a>
                                                                                        < /li>
                                                                                            < /ul>
                                                                                                < /nav>
                                                                                                    < /aside>
                                                                                                        < section class="content units-row">
                                                                                                            < h2> Portal List
                                                                                                                < /h2>
                                                                                                                    < div class="panel unit-100">
                                                                                                                        < div class="unit-100">
                                                                                                                            < div class="units-row">
                                                                                                                                < div class="unit-50" id="header">
                                                                                                                                    < div class="ui-widget">
                                                                                                                                        < input id="tags" size="50" type="search" placeholder="Filter portal list (allows for multiple tags, separated by whitespace)" />
                                                                                                                                        < /div>
                                                                                                                                            < /div>
                                                                                                                                                < div class="unit-10">
                                                                                                                                                    < button class="btn mobile-hide" id="btn_list">
                                                                                                                                                        < i class="fa fa-cube fa-fw">
                                                                                                                                                            < /i>
                                                                                                                                                                </button>
                                                                                                                                                                < /div>
                                                                                                                                                                    < div class="unit-10">
                                                                                                                                                                        < button class="btn mobile-hide" id="btn_blocks">
                                                                                                                                                                            < i class="fa fa-cube fa-fw">
                                                                                                                                                                                < /i>
                                                                                                                                                                                    </button>
                                                                                                                                                                                    < /div>
                                                                                                                                                                                        < /div>
                                                                                                                                                                                            < /div>
                                                                                                                                                                                                < div class="unit-100" id="portalList">
                                                                                                                                                                                                    < ul class="blocks-mobile-33" id="list"> { % for portal in data % }
                                                                                                                                                                                                        < li>
                                                                                                                                                                                                            < div class=" title unit-row end">
                                                                                                                                                                                                                < div class=" title unit-100">
                                                                                                                                                                                                                    < h3 class="search"> { { portal.id } }
                                                                                                                                                                                                                        < /h3>
                                                                                                                                                                                                                            < /div>
                                                                                                                                                                                                                                < /div>
                                                                                                                                                                                                                                    < div class="unit-row end">
                                                                                                                                                                                                                                        < div class="unit-25 mobile-hide" style="background: red;">
                                                                                                                                                                                                                                            < p>
                                                                                                                                                                                                                                                < i class="fa fa-globe fa-fw">
                                                                                                                                                                                                                                                    < /i>
                                                                                                                                                                                                                                                        < span class="search"> { { portal.country } }
                                                                                                                                                                                                                                                            < /span>
                                                                                                                                                                                                                                                                < /p>
                                                                                                                                                                                                                                                                    < /div>
                                                                                                                                                                                                                                                                        < div class="size unit-30 units-mobile-50">
                                                                                                                                                                                                                                                                            < div class="units-row end">
                                                                                                                                                                                                                                                                                < div class="unit-100">
                                                                                                                                                                                                                                                                                    < i class="fa fa-cube fa-fw ">
                                                                                                                                                                                                                                                                                        < /i>
                                                                                                                                                                                                                                                                                            < span class="text "> datasets:
                                                                                                                                                                                                                                                                                                < /span>
                                                                                                                                                                                                                                                                                                    < span class="value "> { { portal.datasets } }
                                                                                                                                                                                                                                                                                                        < /span>
                                                                                                                                                                                                                                                                                                            < /div>
                                                                                                                                                                                                                                                                                                                < /div>

                                                                                                                                                                                                                                                                                                                    < div>

                                                                                                                                                                                                                                                                                                                        < i class="fa fa-files-o fa-fw ">
                                                                                                                                                                                                                                                                                                                            < /i>
                                                                                                                                                                                                                                                                                                                                < span class="text "> resources:
                                                                                                                                                                                                                                                                                                                                    < /span>
                                                                                                                                                                                                                                                                                                                                        < span class="value "> { { portal.resources } }
                                                                                                                                                                                                                                                                                                                                            < /span>
                                                                                                                                                                                                                                                                                                                                                < /div>
                                                                                                                                                                                                                                                                                                                                                    < /div>
                                                                                                                                                                                                                                                                                                                                                        < div class="size ">
                                                                                                                                                                                                                                                                                                                                                            < div>
                                                                                                                                                                                                                                                                                                                                                                < i class="fa fa-files-o fa-fw ">
                                                                                                                                                                                                                                                                                                                                                                    < /i>
                                                                                                                                                                                                                                                                                                                                                                        < span class="text"> status:
                                                                                                                                                                                                                                                                                                                                                                            < /span>
                                                                                                                                                                                                                                                                                                                                                                                < span class="value search"> { { portal.status } }
                                                                                                                                                                                                                                                                                                                                                                                    < /span>
                                                                                                                                                                                                                                                                                                                                                                                        < /div>
                                                                                                                                                                                                                                                                                                                                                                                            < div>
                                                                                                                                                                                                                                                                                                                                                                                                < span class="text"> latest snapshot:
                                                                                                                                                                                                                                                                                                                                                                                                    < /span>
                                                                                                                                                                                                                                                                                                                                                                                                        < span class="value"> { { portal.latest_snapshot } }
                                                                                                                                                                                                                                                                                                                                                                                                            < /span>
                                                                                                                                                                                                                                                                                                                                                                                                                < /div>
                                                                                                                                                                                                                                                                                                                                                                                                                    < /div>
                                                                                                                                                                                                                                                                                                                                                                                                                        < /div>

                                                                                                                                                                                                                                                                                                                                                                                                                            < /li> { % endfor % }
                                                                                                                                                                                                                                                                                                                                                                                                                                < /ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                    < /div>
                                                                                                                                                                                                                                                                                                                                                                                                                                        < /section>

                                                                                                                                                                                                                                                                                                                                                                                                                                            < /div> { % endblock % } { % block pageScripts % }
                                                                                                                                                                                                                                                                                                                                                                                                                                                < script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    var data = { { json | safe } }; $(function () { console.log(data) var availableTags = [] for (var portal in data) { availableTags.push(data[portal].id) availableTags.push(data[portal].country) availableTags.push(data[portal].software) availableTags.push(data[portal].status) } function split(val) { return val.split(/,\s*/); } function extractLast(term) { return split(term).pop(); } $('#tags').keypress(function (event) { console.log(event.which) //if ( event.which != 13 ) { // return //} var filter = $(this).val().toLowerCase().trim(); var filter_tags = filter.split(" "); var filter_tags_length = filter_tags.length; $('#list>li').each(function () { matches = 0; c = 0; var $this = $(this); $this.find(".search").each(function () { var t = $(this); $.each(filter_tags, function (i, a_filter) { if (t.text().toLowerCase().indexOf(a_filter) !== -1) { c++; if (c == filter_tags_length) { matches = 1; } } }); }); (matches == 1) ? $(this).show(): $(this).hide(); }); }); $('#btn_list').click(function () { console.log("removeClass") console.log($('#list')) $('#list').removeClass('blocks-4'); }); $('#btn_blocks').click(function () { $('#list').addClass('blocks-4'); console.log("addClass") console.log($('#list')) }); });
                                                                                                                                                                                                                                                                                                                                                                                                                                                    < /script> { % endblock % }